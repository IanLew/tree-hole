/*!
 * viewport-units-buggyfill v0.6.2
 * @web: https://github.com/rodneyrehm/viewport-units-buggyfill/
 * @author: Rodney Rehm - http://rodneyrehm.de/en/
 */
(function(){(function(q,f){"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?module.exports=f():q.viewportUnitsBuggyfill=f()})(this,function(){function q(a,b){var c;return function(){var e=this,d=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(e,d)},b)}}function f(){r&&(u(),setTimeout(function(){k.textContent=v();k.parentNode.appendChild(k);window.dispatchEvent(new l("viewport-units-buggyfill-style"))},1))}function u(){h=[];m.call(document.styleSheets,function(a){var b;a:{try{if(!a.cssRules){b=void 0;break a}}catch(e){if("SecurityError"!==e.name)throw e;b=void 0;break a}b=[];for(var c=0;c<a.cssRules.length;c++)b.push(a.cssRules[c])}b&&"patched-viewport"!==a.ownerNode.id&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(a.media&&a.media.mediaText&&window.matchMedia&&!window.matchMedia(a.media.mediaText).matches||m.call(b,w))});return h}function w(a){if(7===a.type){var b;try{b=a.cssText}catch(c){return}n.lastIndex=0;n.test(b)&&!C.test(b)&&(h.push([a,null,b]),d.hacks&&d.hacks.findDeclarations(h,a,null,b))}else a.style?m.call(a.style,function(c){var b=a.style.getPropertyValue(c);a.style.getPropertyPriority(c)&&(b+=" !important");n.lastIndex=0;n.test(b)&&(h.push([a,c,b]),d.hacks&&d.hacks.findDeclarations(h,a,c,b))}):a.cssRules&&m.call(a.cssRules,function(a){w(a)})}function v(){x=D();var a=[],b=[],c,e;h.forEach(function(d){d=E.apply(null,d);var f=d.selector.length?d.selector.join(" {\n")+" {\n":"",g=Array(d.selector.length+1).join("\n}");f&&f===c?(f&&!c&&(c=f,e=g),b.push(d.content)):(b.length&&(a.push(c+b.join("\n")+e),b.length=0),f?(c=f,e=g,b.push(d.content)):(a.push(d.content),e=c=null))});b.length&&a.push(c+b.join("\n")+e);y&&a.push("* { content: normal !important; }");return a.join("\n\n")}function E(a,b,c){var e=[];c=c.replace(n,F);d.hacks&&(c=d.hacks.overwriteDeclaration(a,b,c));b&&(e.push(a.selectorText),c=b+": "+c+";");for(a=a.parentRule;a;)a.media?e.unshift("@media "+a.media.mediaText):a.conditionText&&e.unshift("@supports "+a.conditionText),a=a.parentRule;return{selector:e,content:c}}function F(a,b,c){a=x[c];return parseFloat(b)/100*a+"px"}function D(){var a=window.innerHeight,b=window.innerWidth;return{vh:a,vw:b,vmax:Math.max(b,a),vmin:Math.min(b,a)}}function G(a){var b=0,c=function(){b--;b||a()};m.call(document.styleSheets,function(a){a.href&&z(a.href)!==z(location.href)&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(b++,H(a.ownerNode,c))});b||a()}function z(a){return a.slice(0,a.indexOf("/",a.indexOf("://")+3))}function H(a,b){I(a.href,function(){var c=document.createElement("style");c.media=a.media;c.setAttribute("data-href",a.href);c.textContent=this.responseText;a.parentNode.replaceChild(c,a);b()},b)}function I(a,b,c){var d=new XMLHttpRequest;if("withCredentials"in d)d.open("GET",a,!0);else if("undefined"!==typeof XDomainRequest)d=new XDomainRequest,d.open("GET",a);else throw Error("cross-domain XHR not supported");d.onload=b;d.onerror=c;d.send();return d}var r=!1,d,g=window.navigator.userAgent,n=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,C=/(https?:)?\/\//,m=[].forEach,x,h,k,p=/MSIE [0-9]\./i.test(g),t=/MSIE [0-8]\./i.test(g),y=-1<g.indexOf("Opera Mini"),A=/(iPhone|iPod|iPad).+AppleWebKit/i.test(g)&&function(){var a=g.match(/OS (\d+)/);return a&&1<a.length&&10>parseInt(a[1])}(),B=-1<g.indexOf(" Android ")&&-1<g.indexOf("Version/")?4.4>=parseFloat((g.match("Android ([0-9.]+)")||[])[1]):!1;p||(p=!!navigator.userAgent.match(/MSIE 10\.|Trident.*rv[ :]*1[01]\.| Edge\/1\d\./));try{new l("test")}catch(a){var l=function(a,c){var b;c=c||{bubbles:!1,cancelable:!1,detail:void 0};b=document.createEvent("CustomEvent");b.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return b};l.prototype=window.Event.prototype;window.CustomEvent=l}return{version:"0.6.1",findProperties:u,getCss:v,init:function(a){if(!r){!0===a&&(a={force:!0});d=a||{};d.isMobileSafari=A;d.isBadStockAndroid=B;!d.ignoreVmax||d.force||t||(p=!1);if(t||!(d.force||A||p||B||y||d.hacks&&d.hacks.required(d)))return window.console&&t&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};window.dispatchEvent(new l("viewport-units-buggyfill-init"));d.hacks&&d.hacks.initialize(d);r=!0;k=document.createElement("style");k.id="patched-viewport";document[d.appendToBody?"body":"head"].appendChild(k);G(function(){var a=q(f,d.refreshDebounceWait||100);window.addEventListener("orientationchange",a,!0);window.addEventListener("pageshow",a,!0);var c;if(!(c=d.force||p))try{c=window.self!==window.top}catch(e){c=!0}c&&(window.addEventListener("resize",a,!0),d._listeningToResize=!0);d.hacks&&d.hacks.initializeEvents(d,f,a);f()})}},refresh:f}})})();